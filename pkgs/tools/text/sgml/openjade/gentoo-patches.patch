diff -urNp openjade-1.3.2/grove/Makefile.sub devel/grove/Makefile.sub
--- openjade-1.3.2/grove/Makefile.sub	2002-10-20 23:47:24.000000000 +0200
+++ devel/grove/Makefile.sub	2007-07-23 15:39:23.000000000 +0200
@@ -1,4 +1,4 @@
 LTVERSION=0:1:0
 LIB=ogrove
-DEPLIBS=-lm
+DEPLIBS=-lm -lstdc++
 OBJS=Node.o LocNode.o
diff -urNp openjade-1.3.2/spgrove/Makefile.sub devel/spgrove/Makefile.sub
--- openjade-1.3.2/spgrove/Makefile.sub	2002-11-15 23:46:50.000000000 +0100
+++ devel/spgrove/Makefile.sub	2007-07-23 16:06:13.000000000 +0200
@@ -1,9 +1,10 @@
 LTVERSION=0:1:0
 LIB=ospgrove
 INCLUDE=-I$(srcdir)/../grove
-DEPLIBS=-lm -L$(TOP)/grove -L$(TOP)/grove/.libs \
+DEPLIBS=$(TOP)/grove/libogrove.la \
+       -lm -losp -L$(TOP)/grove/.libs \
 	-L$(TOP)/lib -L$(TOP)/lib/.libs \
-	$(LIB_THREADS)
+	$(LIB_THREADS) -lstdc++
 OBJS=GroveApp.o GroveBuilder.o SdNode.o
 GENSRCS=grove_inst.cxx
 
diff -urNp openjade-1.3.2/style/Makefile.sub devel/style/Makefile.sub
--- openjade-1.3.2/style/Makefile.sub	2003-04-18 19:18:10.000000000 +0200
+++ devel/style/Makefile.sub	2007-07-23 16:08:26.000000000 +0200
@@ -1,8 +1,8 @@
 LTVERSION=0:1:0
 LIB=ostyle
-DEPLIBS=-lm -L$(TOP)/grove -L$(TOP)/grove/.libs \
-  -L$(TOP)/lib -L$(TOP)/lib/.libs \
-  -L$(TOP)/spgrove -L$(TOP)/spgrove/.libs 
+DEPLIBS=$(TOP)/grove/libogrove.la $(TOP)/spgrove/libospgrove.la \
+  -lm -losp -L$(TOP)/lib -L$(TOP)/lib/.libs -L$(TOP)/grove/.libs \
+  -L$(TOP)/spgrove -L$(TOP)/spgrove/.libs -lstdc++
 OBJS=LangObj.o \
   Collector.o \
   DssslApp.o \









Index: openjade-1.3.2/jade/Makefile.sub
===================================================================
--- openjade-1.3.2.orig/jade/Makefile.sub
+++ openjade-1.3.2/jade/Makefile.sub
@@ -4,7 +4,7 @@ OBJS=jade.o SgmlFOTBuilder.o RtfFOTBuild
 INCLUDE=-I$(srcdir)/../grove -I$(srcdir)/../spgrove -I$(srcdir)/../style
 # XLIBS=../style/libostyle.a ../spgrove/libospgrove.a ../grove/libogrove.a \
 #   ../lib/libosp.a
-XLIBS=../style/libostyle.a ../spgrove/libospgrove.a ../grove/libogrove.a $(splibdir)/libosp.a
+XLIBS=../style/libostyle.a ../grove/libogrove.a ../spgrove/libospgrove.a $(splibdir)/libosp.a
 GENSRCS=JadeMessages.h HtmlMessages.h RtfMessages.h TeXMessages.h \
  HtmlFOTBuilder_inst.cxx RtfFOTBuilder_inst.cxx  TeXFOTBuilder_inst.cxx \
  TransformFOTBuilder_inst.cxx MifMessages.h MifFOTBuilder_inst.cxx





diff -ru a/Makefile.lib.in b/Makefile.lib.in
--- a/Makefile.lib.in	2002-01-22 05:57:53.000000000 -0600
+++ b/Makefile.lib.in	2009-01-04 16:15:41.000000000 -0600
@@ -23,7 +23,7 @@
 	echo 'LT_OBJS='`echo $(OBJS)|sed 's/\.o/.lo/g'` >Makefile.lt
 
 lib$(LIB).la: $(LT_OBJS)
-	$(LIBTOOL) --mode=link $(CC) $(LINKFLAGS) -o lib$(LIB).la $(LT_OBJS) \
+	$(LIBTOOL) --mode=link $(CC) $(LDFLAGS) $(LINKFLAGS) -o lib$(LIB).la $(LT_OBJS) \
 	    -rpath $(libdir) -version-info $(LTVERSION) $(DEPLIBS)
 
 install:





diff -u /var/tmp/portage/app-text/openjade-1.3.2-r1/work/openjade-1.3.2/Makefile.prog.in /tmp/buffer-content-5978T7K
--- a/Makefile.prog.in	2002-01-22 06:57:53.000000000 -0500
+++ b/Makefile.prog.in	2009-11-19 17:23:05.000000000 -0500
@@ -10,16 +10,15 @@
 top_builddir=@TOP@
 LINKFLAGS = @LINKFLAGS@
 
-ALL_LIBS = $(XLIBS) $(LIBS)
 Makefile.lt:
-	echo 'LT_LIBS='`echo $(ALL_LIBS)|sed 's/\.a/.la/g'` >Makefile.lt
+	echo 'LT_LIBS='`echo $(XLIBS)|sed 's/\.a/.la/g'` >Makefile.lt
 
 PROG:=$(shell echo "$(PROG)" | sed '@program_transform_name@')
 
 all: $(PROG)
 
 $(PROG): $(OBJS) $(COBJS) $(LT_LIBS)
-	$(LIBTOOL) --mode=link $(CXX) $(LINKFLAGS) $(CXXFLAGS) $(LDFLAGS) -o $@ $(OBJS) $(COBJS) $(LT_LIBS)
+	$(LIBTOOL) --mode=link $(CXX) $(LINKFLAGS) $(CXXFLAGS) $(LDFLAGS) -o $@ $(OBJS) $(COBJS) $(LT_LIBS) $(EXT_LIBS)
 
 install: $(PROG)
 	-test -d $(DESTDIR)$(bindir) || \



--- openjade-1.3.2-orig//jade/TeXFOTBuilder.cxx	2011-05-02 22:08:49.274006803 +0000
+++ openjade-1.3.2-orig//jade/TeXFOTBuilder.cxx	2011-05-02 22:14:09.849006939 +0000
@@ -88,6 +88,8 @@ 
       value.convertString(nic_.placement);
       }
     ExtensionFlowObj *copy() const { return new PageFloatFlowObj(*this); }
+  public:
+    PageFloatFlowObj() {}
   private:
     PageFloatNIC nic_;
     StringC name_;
@@ -101,6 +103,8 @@ 
       fotb.endPageFootnote();
     }
     ExtensionFlowObj *copy() const { return new PageFootnoteFlowObj(*this); }
+  public:
+    PageFootnoteFlowObj() {}
   private:
   };
   //////////////////////////////////////////////////////////////////////
--- openjade-1.3.2-orig//jade/TransformFOTBuilder.cxx	2011-05-02 22:08:49.275006803 +0000
+++ openjade-1.3.2-orig//jade/TransformFOTBuilder.cxx	2011-05-02 22:18:31.614007052 +0000
@@ -41,6 +41,7 @@ 
   };
   class EntityRefFlowObj : public TransformExtensionFlowObj {
   public:
+    EntityRefFlowObj() {}
     void atomic(TransformFOTBuilder &fotb, const NodePtr &) const {
       fotb.entityRef(name_);
     }
@@ -56,6 +57,7 @@ 
   };
   class ProcessingInstructionFlowObj : public TransformExtensionFlowObj {
   public:
+    ProcessingInstructionFlowObj() {}
     void atomic(TransformFOTBuilder &fotb, const NodePtr &) const {
       fotb.processingInstruction(data_);
     }
@@ -98,6 +100,8 @@ 
       }
     }
     ExtensionFlowObj *copy() const { return new EmptyElementFlowObj(*this); }
+  public:
+    EmptyElementFlowObj() {}
   private:
     ElementNIC nic_;
   };
@@ -133,6 +137,8 @@ 
       }
     }
     ExtensionFlowObj *copy() const { return new ElementFlowObj(*this); }
+  public:
+    ElementFlowObj() {}
   private:
     ElementNIC nic_;
   };
@@ -150,6 +156,8 @@ 
       value.convertString(systemId_);
     }
     ExtensionFlowObj *copy() const { return new EntityFlowObj(*this); }
+  public:
+    EntityFlowObj() {};
   private:
     StringC systemId_;
   };
@@ -174,6 +182,8 @@ 
       }
     }
     ExtensionFlowObj *copy() const { return new DocumentTypeFlowObj(*this); }
+  public:
+    DocumentTypeFlowObj() {}
   private:
     DocumentTypeNIC nic_;
   };

--- a/msggen.pl
+++ b/msggen.pl
@@ -4,6 +4,7 @@
 # See the file COPYING for copying permission.
 
 use POSIX;
+use Getopt::Std;
 
 # Package and version.
 $package = 'openjade';
@@ -18,8 +19,7 @@
 undef $opt_l;
 undef $opt_p;
 undef $opt_t;
-do 'getopts.pl';
-&Getopts('l:p:t:');
+getopts('l:p:t:');
 $module = $opt_l;
 $pot_file = $opt_p;
 
@@ -72,7 +72,7 @@
     else {
 	$field[0] =~ /^[IWQXE][0-9]$/ || &error("invalid first field");;
 	$type[$num] = substr($field[0], 0, 1);
-	$argc = int(substr($field[0], 1, 1));
+	$argc = substr($field[0], 1, 1);
     }
     $nargs[$num] = $argc;
     $field[1] =~ /^[a-zA-Z_][a-zA-Z0-9_]+$/ || &error("invalid tag");
